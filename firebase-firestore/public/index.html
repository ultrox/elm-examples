<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Firestore</title>
  </head>
  <body>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js';
      import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js';

      import {
        getAuth,
        GoogleAuthProvider,
        signInWithPopup,
        signOut,
        onAuthStateChanged,
      } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js';

      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: 'AIzaSyC4-YEHVg-Tnmc_qA6AJi8f5meIGNkCe_k',
        authDomain: 'subtitles-82070.firebaseapp.com',
        databaseURL:
          'https://subtitles-82070-default-rtdb.europe-west1.firebasedatabase.app',
        projectId: 'subtitles-82070',
        storageBucket: 'subtitles-82070.appspot.com',
        messagingSenderId: '198094719161',
        appId: '1:198094719161:web:67e64e44a6c325ba2d7368',
        measurementId: 'G-CZHL8NRYRZ',
      };

      console.log('hello1');
      // Initialize Firebase
      // window.firebase = firebase.initializeApp(firebaseConfig);
      window.firebase = initializeApp(firebaseConfig);
      window.AUTH = {
        auth: getAuth(),
        provider: new GoogleAuthProvider(),
        onAuthStateChanged,
        signInWithPopup,
        signOut,
      };
      window.DB = {
        firestore: getFirestore(),
      };
    </script>

    <script>
      console.log('first');
    </script>
    <script defer src="./app.js"></script>
    <h1>Hello Firebase and Elm!</h1>

    <main>
      <seciton id="when-s-out">
        <button type="button" id="s-in-btn">Sign In With Google</button>
      </seciton>

      <seciton id="when-s-in" hidden="true">
        <div id="user-details"></div>
        <button type="button" id="s-out-btn">Logout</button>
      </seciton>
    </main>
  </body>
</html>
